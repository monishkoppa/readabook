{% extends "admin_layout.html" %}

{% block title %}
Read A Book
{% endblock %}

{% block main %}

<h3>Book Requests</h3>
<table id="issues" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th class="th-sm">Username
            </th>
            <th class="th-sm">Title
            </th>
            <th class="th-sm">ISBN
            </th>
            <th class="th-sm">Pickup
            </th>
            <th class="th-sm">Action
            </th>
        </tr>
    </thead>
    <tbody>
        {% for book in book_requests %}
        <tr>
            <td>{{ book.username }}</td>
            <td><a href="/adminview/{{ book.isbn }}">{{ book.title }}</a></td>
            <td>{{ book.isbn }}</td>
            <td>{{ book.pickup }}</td>
            <td><span><form action="/issue/{{ book.isbn }}/{{ book.username }}/yes" method="POST"><button type="submit" class="btn btn-success">Approve</button></form></span> <span><form action="/issue/{{ book.isbn }}/{{ book.username }}/no" method="POST"><button type="submit" class="btn btn-danger">Decline</button></form></span></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Books Issued</h3>
<table id="issues" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th class="th-sm">Title
            </th>
            <th class="th-sm">ISBN
            </th>
            <th class="th-sm">Issued To
            </th>
            <th class="th-sm">Admin
            </th>
            <th class="th-sm">Date Issued
            </th>
            <th class="th-sm">Date Returned
            </th>
            <th class="th-sm">Action
            </th>
        </tr>
    </thead>
    <tbody>
        {% for book in books_issued %}
        <tr>
            <td><a href="/adminview/{{ book.isbn }}">{{ book.title }}</a></td>
            <td>{{ book.isbn }}</td>
            <td>{{ book.issuedTo }}</td>
            <td>{{ book.issuedBy }}</td>
            <td>{{ book.dateIssued }}</td>
            <td>{{ book.dateReturned }}</td>
            <td><button type="button" class="btn btn-success">Approve</button> <button type="button" class="btn btn-danger">Decline</button></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Catalog</h3>
<table id="catalog" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th class="th-sm">Title
            </th>
            <th class="th-sm">Author
            </th>
            <th class="th-sm">ISBN
            </th>
            <th class="th-sm">Pages
            </th>
        </tr>
    </thead>
    <tbody>
        {% for book in all_books %}
        <tr>
            <td><a href="/adminview/{{ book.isbn }}">{{ book.title }}</a></td>
            <td>{{ book.author }}</td>
            <td>{{ book.isbn }}</td>
            <td>{{ book.numPages }}</td>
        </tr>
        {% endfor %}
    </tbody>
    <!-- <tfoot>
        <tr>
            <th>Name
            </th>
            <th>Position
            </th>
            <th>Office
            </th>
            <th>Age
            </th>
            <th>Start date
            </th>
            <th>Salary
            </th>
        </tr>
    </tfoot> -->
</table>
<!--{% for book in books %}-->
<!--<img src="/static/images/{{ book.isbn }}.jpg" style="float: left; max-width: 80%; margin: 0 2em 2em 0;">-->
<!--<h3>{{ book.title }}</h3>-->
<!--<p>by {{book.author }}</p>-->
<!--<p>Genre: {{ book.category }}</p>-->
<!--<p>Pages: {{ book.pages }}</p>-->
<!--<p>Summary: {{ book.description }}</p>-->
<!--<p>Status: Available</p>-->
<!--<a href="/borrow"><button type="button" class="btn btn-outline-primary">Borrow Book</button></a>-->
<!--{% endfor %}-->
<!-- <div> -->
    <!-- <table class="table" id="books">
        <thead>
            <tr>
                <th scope="col">Book Title</th>
                <th scope="col">Author</th>
                <th scope="col">ISBN</th>
                <th scope="col">Request Book</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <th scope="row"><a href="/book/{{ book.isbn }}">{{ book.title }}</a></th>
                <td>{{ book.author }}</td>
                <td>{{ book.isbn }}</td>
                <td>
                    <form action="/borrow" method="get"><button type="submit" class="btn btn-warning">Warning</button></form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table> -->
<!--  <script>
    var countries = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.whitespace,
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        // url points to a json file that contains an array of country names, see
        // https://github.com/twitter/typeahead.js/blob/gh-pages/data/countries.json
        prefetch: '/static/data/countries.json'
    });

    // passing in `null` for the `options` arguments will result in the default
    // options being used
    $('#prefetch .typeahead').typeahead(null, {
        name: 'countries',
        source: countries
    });
</script>-->
<script>
    $(document).ready(function() {
        $('#catalog').DataTable();
        $('.dataTables_length').addClass('bs-select');
    });
</script>
<script>
    $(document).ready(function() {
        $('#issues').DataTable();
        $('.dataTables_length').addClass('bs-select');
    });
</script>
{% endblock %}
